!function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){const o=()=>{(e=>{const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)})("https://jwtest.ngrok.io/src/utilities/vis-plugin.css")},n={},i=function(e,t,o,n){visData=t.getJson(includeRowId=!0,melt=t.has_pivots),console.log("buildVis() visData",visData);const i=d3.scaleOrdinal().range(d3.schemeAccent),s=o=>Math.floor(5+o/t.ranges[e.sizeBy].max*45);d3.forceSimulation(visData).force("charge",d3.forceManyBody().strength(5)).force("forceX",d3.forceX(n=>(n=>{if(void 0!==e.groupBy){var i=t.ranges[e.groupBy].set.length+1,s=t.ranges[e.groupBy].set.indexOf(n)+1;return o/i*s}return o/2})(n[e.groupBy]))).force("forceY",d3.forceY(n/2)).force("collision",d3.forceCollide().radius(t=>s(t[e.sizeBy]))).on("tick",(function(){var t=d3.select("svg").selectAll("circle").data(visData,e=>e.lookerId);t.enter().append("circle").attr("r",t=>s(t[e.sizeBy])).attr("cx",e=>Math.random()*o).attr("cy",e=>Math.random()*n).style("fill",t=>i(t[e.colorBy])).merge(t).transition().duration(100).attr("r",t=>s(t[e.sizeBy])).attr("cx",e=>e.x).attr("cy",e=>e.y).style("fill",t=>i(t[e.colorBy])),t.exit().remove()}))};looker.plugins.visualizations.add({options:n,create:function(e,t){o(),this.container=d3.select(e).append("svg").attr("id","visSvg").attr("width",e.clientWidth).attr("height",e.clientHeight)},updateAsync:function(e,t,o,s,r,l){this.clearErrors(),console.log("sourceData:",e),console.log("config:",o),console.log("queryResponse:",s),document.getElementById("visSvg").setAttribute("width",t.clientWidth),document.getElementById("visSvg").setAttribute("height",t.clientHeight),visModel=new VisPluginModel(e,o,s),console.log("visModel",visModel),newOptions=function(e){newOptions=n;for(var t=0;t<e.dimensions.length;t++)newOptions["label|"+e.dimensions[t].name]={section:"Dimensions",type:"string",label:e.dimensions[t].label,default:e.dimensions[t].label,order:10*t+1},newOptions["hide|"+e.dimensions[t].name]={section:"Dimensions",type:"boolean",label:"Hide",display_size:"third",order:10*t+2};for(t=0;t<e.measures.length;t++)newOptions["label|"+e.measures[t].name]={section:"Measures",type:"string",label:e.measures[t].label_short||e.measures[t].label,default:e.measures[t].label_short||e.measures[t].label,order:100+10*t+1},newOptions["style|"+e.measures[t].name]={section:"Measures",type:"string",label:"Style",display:"select",values:[{Normal:"normal"},{Hide:"hide"}],order:100+10*t+2};sizeByOptions=[];for(t=0;t<e.measures.length;t++)option={},option[e.measures[t].label]=e.measures[t].name,sizeByOptions.push(option);newOptions.sizeBy={section:"Data",type:"string",label:"Size By",display:"select",values:sizeByOptions,default:"0"},colorByOptions=[];for(t=0;t<e.dimensions.length;t++)option={},option[e.dimensions[t].label]=e.dimensions[t].name,colorByOptions.push(option);for(t=0;t<e.pivot_fields.length;t++)option={},option[e.pivot_fields[t].label]=e.pivot_fields[t].name,colorByOptions.push(option);return e.pivot_fields.length>1&&colorByOptions.push({"Pivot Series":"lookerPivotKey"}),newOptions.colorBy={section:"Data",type:"string",label:"Color By",display:"select",values:colorByOptions,default:"0"},newOptions.groupBy={section:"Data",type:"string",label:"Group By",display:"select",values:colorByOptions,default:"0"},newOptions}(visModel),this.trigger("registerOptions",newOptions),i(o,visModel,t.clientWidth,t.clientHeight-16),l()}})}]);